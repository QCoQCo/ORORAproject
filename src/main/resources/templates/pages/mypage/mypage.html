<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}"
    lang="ko"
>
    <head>
        <title layout:fragment="title">마이페이지 - arataBUSAN</title>
        <th:block layout:fragment="css">
            <link rel="stylesheet" th:href="@{/css/mypage.css}" />
        </th:block>
    </head>
    <body>
        <div layout:fragment="content" th:data-kakao-api-key="${kakaoMapApiKey}" th:data-profile-user-id="${profileUserId}">
            <!-- 메인 콘텐츠 -->
            <main class="mypage-container">
                <div class="mypage-header">
                    <div class="user-profile">
                        <div class="profile-avatar">
                            <img
                                th:src="@{/images/defaultProfile.png}"
                                alt="프로필 이미지"
                                id="profile-image"
                            />
                        </div>
                        <div class="profile-info">
                            <h1 class="username" id="user-name">사용자명</h1>
                            <p class="user-email" id="user-email">user@example.com</p>
                            <p class="join-date" id="join-date">가입일: 2024-01-01</p>
                            <button
                                class="edit-profile-btn"
                                id="edit-profile-btn"
                                onclick="window.location.href='/pages/mypage/edit-profile'"
                            >
                                프로필 수정
                            </button>
                        </div>
                    </div>
                </div>

                <div class="mypage-content">
                    <!-- 탭 네비게이션 -->
                    <nav class="tab-navigation">
                        <button class="tab-btn active" data-tab="reviews">내 리뷰</button>
                        <button class="tab-btn" data-tab="comments">내 댓글</button>
                        <button class="tab-btn" data-tab="likes">좋아요 한 관광지</button>
                        <button class="tab-btn" data-tab="requests">내 신청관리</button>
                        <button class="tab-btn" data-tab="spot-add">관광지 추가신청</button>
                    </nav>

                    <!-- 탭 콘텐츠 -->
                    <div class="tab-content">
                        <!-- 내 리뷰 탭 -->
                        <div class="tab-panel active" id="reviews-tab">
                            <div class="reviews-columns">
                                <!-- 내가 작성한 리뷰 -->
                                <div class="reviews-column">
                                    <div class="section-header">
                                        <h2>내가 작성한 리뷰</h2>
                                        <span class="count" id="reviews-count">0개</span>
                                    </div>
                                    <div class="reviews-list" id="reviews-list">
                                        <!-- 리뷰 목록이 여기에 동적으로 추가됩니다 -->
                                    </div>
                                </div>
                                <!-- 좋아요 누른 리뷰 -->
                                <div class="reviews-column">
                                    <div class="section-header">
                                        <h2>좋아요 누른 리뷰</h2>
                                        <span class="count" id="liked-reviews-count">0개</span>
                                    </div>
                                    <div class="reviews-list" id="liked-reviews-list">
                                        <!-- 좋아요 누른 리뷰 목록이 여기에 동적으로 추가됩니다 -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 내 댓글 탭 -->
                        <div class="tab-panel" id="comments-tab">
                            <div class="section-header">
                                <h2>내가 작성한 댓글</h2>
                                <span class="count" id="comments-count">0개</span>
                            </div>
                            <div class="comments-list" id="comments-list">
                                <!-- 댓글 목록이 여기에 동적으로 추가됩니다 -->
                            </div>
                        </div>

                        <!-- 좋아요한 관광지 탭 -->
                        <div class="tab-panel" id="likes-tab">
                            <div class="section-header">
                                <h2>좋아요 한 관광지</h2>
                                <span class="count" id="likes-count">0개</span>
                            </div>
                            <div class="likes-list" id="likes-list">
                                <!-- 좋아요 한 관광지 목록이 여기에 동적으로 추가됩니다 -->
                            </div>
                        </div>

                        <!-- 내 신청관리 탭 -->
                        <div class="tab-panel" id="requests-tab">
                            <div class="section-header">
                                <h2>내 신청관리</h2>
                                <span class="count" id="requests-count">0개</span>
                            </div>
                            <div class="requests-list" id="requests-list">
                                <!-- 신청 목록이 여기에 동적으로 추가됩니다 -->
                            </div>
                        </div>

                        <!-- 관광지 추가신청 탭 -->
                        <div class="tab-panel" id="spot-add-tab">
                            <div class="section-header">
                                <h2>관광지 추가신청</h2>
                                <p class="section-description">
                                    새로운 관광지를 등록하고 싶으시다면 신청해주세요. 관리자 검토 후
                                    반영됩니다.
                                </p>
                            </div>
                            <form id="spot-add-form" class="spot-add-form">
                                <div class="form-group">
                                    <label for="spot-title"
                                        >관광지명 <span class="required">*</span></label
                                    >
                                    <input
                                        type="text"
                                        id="spot-title"
                                        name="spotTitle"
                                        required
                                        maxlength="80"
                                        placeholder="관광지명을 입력해주세요"
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="spot-region"
                                        >지역 <span class="required">*</span></label
                                    >
                                    <select id="spot-region" name="regionId" required>
                                        <option value="">지역을 선택해주세요</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="spot-link">링크 URL</label>
                                    <input
                                        type="url"
                                        id="spot-link"
                                        name="linkUrl"
                                        placeholder="https://..."
                                    />
                                </div>
                                <!-- 이미지 관리 섹션 -->
                                <div class="form-group image-management-section">
                                    <label>관광지 사진</label>
                                    <div class="new-images">
                                        <h4>📷 사진 추가</h4>
                                        <div class="file-upload-area">
                                            <input
                                                type="file"
                                                id="spot-images"
                                                name="images"
                                                accept="image/*"
                                                multiple
                                                class="file-input"
                                            />
                                            <label for="spot-images" class="file-label">
                                                <span class="file-icon">📁</span>
                                                <span class="file-text">클릭하여 이미지 선택 (여러 장 가능)</span>
                                            </label>
                                            <div class="selected-files" id="spot-selected-files-preview">
                                                <!-- 선택된 파일 미리보기 -->
                                            </div>
                                        </div>
                                        <small class="form-hint">관광지 사진을 업로드할 수 있습니다 (선택사항, 최대 10장)</small>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="spot-hashtags">해시태그</label>
                                    <input
                                        type="text"
                                        id="spot-hashtags"
                                        name="hashtags"
                                        placeholder="쉼표로 구분하여 입력 (예: 해변, 휴양, 카페)"
                                    />
                                    <small class="form-hint"
                                        >쉼표로 구분하여 여러 해시태그를 입력할 수 있습니다</small
                                    >
                                </div>

                                <!-- 위치 검색 섹션 -->
                                <div class="form-group">
                                    <label for="spot-location-search">위치 검색</label>
                                    <div class="location-search-container">
                                        <div class="location-search-input-group">
                                            <input
                                                type="text"
                                                id="spot-location-search"
                                                placeholder="주소나 관광지명을 입력하세요 (예: 부산 해운대해수욕장)"
                                            />
                                            <button
                                                type="button"
                                                id="spot-location-search-btn"
                                                class="search-btn"
                                            >
                                                검색
                                            </button>
                                        </div>
                                        <div
                                            id="spot-location-results"
                                            class="location-search-results"
                                            style="display: none"
                                        >
                                            <!-- 검색 결과가 여기에 표시됩니다 -->
                                        </div>
                                        <div
                                            class="location-selected-info"
                                            id="spot-location-selected"
                                            style="display: none"
                                        >
                                            <p>
                                                <strong>선택된 위치:</strong>
                                                <span id="spot-location-selected-text"></span>
                                            </p>
                                            <button
                                                type="button"
                                                id="spot-location-clear"
                                                class="clear-btn"
                                            >
                                                선택 취소
                                            </button>
                                        </div>
                                        <input type="hidden" id="spot-latitude" name="latitude" />
                                        <input type="hidden" id="spot-longitude" name="longitude" />
                                        <input type="hidden" id="spot-address" name="address" />
                                    </div>
                                    <small class="form-hint">카카오맵에서 위치를 검색하여 선택할 수 있습니다 (선택사항)</small>
                                </div>

                                <div class="form-group">
                                    <label for="spot-description">관광지 설명</label>
                                    <textarea
                                        id="spot-description"
                                        name="description"
                                        rows="5"
                                        placeholder="관광지에 대한 설명을 입력해주세요"
                                        maxlength="1000"
                                    ></textarea>
                                    <span class="char-count"
                                        ><span id="spot-description-char-count">0</span>/1000</span
                                    >
                                </div>
                                <button type="submit" class="submit-btn">신청 제출</button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <th:block layout:fragment="script">
            <script th:src="@{/js/utils/date.js}"></script>
            <script th:src="@{/js/utils/modal.js}"></script>
            <script th:src="@{/js/utils/notification.js}"></script>
            <script th:src="@{/js/mypage.js}"></script>
        </th:block>
    </body>
</html>
